# File Transfer Server

Сервер для передачи файлов от клиента к серверу

## Особенности

- Защита от переполнения буфера
- Проверка размера файла перед передачей
- Генерация безопасных имен файлов на сервере
- Логирование операций
- Обработка ошибок на всех этапах передачи
- Контроль целостности передачи
- Ограничение максимального размера файла (10МВ)

## Требования

- Python 3.6+
- Доступность сети между клиентом и сервером

## Установка

1. Склонировать репозиторий:

```bash
git clone https://github.com/Volodimirus/100-redteam-projects.git
cd 100-redteam-projects/Projects/4_FILE_TRANSFER_SERVER
```

## Использование

### Запуск сервера

```bash
cd server
python server.py --host localhost --port 8888
```

**Параметры**:
- `--host`: IP-адрес сервера (по умолчанию: localhost)
- `--port`: Порт сервера (по умолчанию: 8888)

### Запуск клиента

```bash
cd client
python client.py --host localhost --port 8888 --file /path/to/file.txt
```

**Параметры**
- `--host`: IP-адрес сервера (по умолчанию: localhost)
- `--port`: Порт сервера (по умолчанию: 8888)
- `--file`: Путь к передаваемому файлу

## Протокол передачи

1. Клиент подключается к серверу
2. Сервер отправляет статус `READY`
3. Клиент отправляет:
    - Имя файла с суффиксом `:FILENAME_END:`
    - Размер файла с суффиксом `:SIZE_END:`
4. Сервер проверяет данные и отправляет `START_TRANSFER`
5. Клиент отправляет содержимое файла блоками
6. Сервер сохраняет файл и отправляет:
    - `SUCCESS:saved_filename` при успехе
    - `ERROR:description` при ошибке

## Меры безопасности

1. Валидация имени файла:
    - Максимальная длина: 255 символов
    - Запрещены абсолютные пути
2. Ограничение размера файла 10МВ
3. Генерация безопасных имен файлов на сервере:
    `ГГГГММДД_ЧЧММСС_оригинальное_имя`
4. Защита от DDoS-атак:
    - Ограничение размера буфера
    - Таймауты соединения

## Логирование

Все операции записываются в консоль с указанием:

- Временной метки
- Уровня важности
- Детали операции
- IP-адреса клиента

## Обработка ошибок

Сервер обрабатывает:

- Потерю соединения
- Невалидные данные
- Ошибки файловой системы
- Превышение размера файла
- Недоступность сервера
- Проблемы с сетью